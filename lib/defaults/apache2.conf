ServerName :::server-name:::
ServerAdmin :::server-admin:::

SetEnv PYTHONPATH /opt/clintosaurous/core/lib/python

<VirtualHost *:443>
    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined

    SSLEngine on
    SSLCertificateFile      :::cert-file:::
    SSLCertificateKeyFile   :::key-file:::

    DocumentRoot            /opt/clintosaurous/core/www/root

    # Root web server path.
    <Location "/">
        Require valid-user
        Options ExecCGI
        AddHandler cgi-script .cgi

        AuthType form
        AuthName "Clintosaurous"
        AuthFormLoginRequiredLocation "/auth/login.cgi"
        AuthFormLoginSuccessLocation "/"
        AuthFormProvider file
        AuthUserFile /etc/apache2/htpasswd
        ErrorDocument 401 "/auth/login.cgi"

        Session On
        # Timeout session after session idle for twelve hours.
        SessionMaxAge 43200
        SessionCookieName session path=/
    </Location>

    # Authentication path.
    Alias /auth /opt/clintosaurous/core/www/auth
    <Location /auth>
        Require all granted
        Options ExecCGI
        AddHandler cgi-script .cgi
    </Location>

    # Authentication login.
    <Location /dologin.html>
        Require all granted
        SetHandler form-login-handler
        AuthType form
        AuthName "Clintosaurous"
        AuthFormLoginRequiredLocation "/auth/login.cgi"
        AuthFormLoginSuccessLocation "/"
        AuthFormProvider file
        AuthUserFile /etc/apache2/htpasswd

        Session On
        # Timeout session after session idle for twelve hours.
        SessionMaxAge 43200
        SessionCookieName session path=/
    </Location>

    # Web site images path.
    Alias /images /opt/clintosaurous/core/www/images
    <Location /images>
        AllowOverride none
        Require all granted
    </Location>

    # Style sheets path.
    Alias /styles /opt/clintosaurous/core/www/styles
    <Location /styles>
        AllowOverride none
        Require all granted
    </Location>

</VirtualHost>

# Health check monitor path.
#   https://server.example.com/healthcheck/alive.txt
Alias /healthcheck /opt/clintosaurous/core/www/healthcheck
<Directory /opt/clintosaurous/core/www/healthcheck>
    AllowOverride   none
    Require         all granted
</Directory>
